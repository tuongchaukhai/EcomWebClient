<p-table [value]="products" class="table-width" [lazy]="true" (onLazyLoad)="loadLazy($event)" [paginator]="true"
    [rows]="rows" [totalRecords]="totalRecords"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
    <ng-template pTemplate="caption">
        <div class="flex align-items-center justify-content-between">
            <div>
                <p>Product Management</p>
            </div>
            <div class="flex">
                <p-button label="Create" icon="pi pi-plus" (onClick)="createShow()"></p-button>
                <div class="p-inputgroup" style="width: 300px; margin-left: 10px;">
                    <input type="text" pInputText placeholder="Search" />
                    <button pButton type="button" icon="pi pi-search" class="p-button-secondary"></button>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="productId">ID <p-sortIcon field="productId"></p-sortIcon></th>
            <th pSortableColumn="productName" [style]="{width: '30%'}">Title <p-sortIcon
                    field="productName"></p-sortIcon></th>
            <th>Image</th>
            <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
            <th pSortableColumn="unitInStock">Quantity <p-sortIcon field="unitInStock"></p-sortIcon></th>
            <th pSortableColumn="categoryName">Category <p-sortIcon field="categoryName"></p-sortIcon>
            </th>
            <th>#</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
        <tr>
            <td>{{product.productId}}</td>
            <td>{{product.productName}}</td>
            <td><img [src]="'https://99designs-blog.imgix.net/blog/wp-content/uploads/2017/02/Anatomy_book_cover.png?auto=format&q=60&w=3300&h=1856.25&fit=crop&crop=faces'"
                    [alt]="product.name" width="100" class="shadow-4" /></td>
            <td>{{product.price | currency: 'USD'}}</td>
            <td>{{product.unitInStock}}</td>
            <td>{{product.categoryName}}</td>
            <td>
                <div class="button-action">
                    <p-button label="Edit" icon="pi pi-pencil" styleClass="p-button-warning"
                        (click)="updateShow(product)"></p-button>
                    <p-button label="Remove" icon="pi pi-trash" styleClass="p-button-danger"
                        (click)="deleteShow(product)"></p-button>
                </div>
            </td>
        </tr>
    </ng-template>
</p-table>


<p-dialog header="Product delete" [(visible)]="visibleDeleteDialog" [modal]="true" [style]="{ width: '30vw' }">
    <p>Are you sure delete <span style="color: red;">"{{selectedProduct?.productName}}"</span> book?</p>
    <ng-template pTemplate="footer">
        <p-button icon="pi pi-check" label="YES" (click)="deleteProduct(selectedProduct)"
            styleClass="p-button-text"></p-button>
        <p-button icon="pi pi-check" label="NO" (click)="visibleDeleteDialog = false; selectedProduct = undefined"
            styleClass="p-button-text"></p-button>
    </ng-template>
</p-dialog>
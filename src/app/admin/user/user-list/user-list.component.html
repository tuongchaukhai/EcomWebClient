<p-table [value]="users" class="table-width" [lazy]="true" (onLazyLoad)="loadLazy($event)" [paginator]="true"
    [rows]="rows" [totalRecords]="totalRecords"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
    <ng-template pTemplate="caption">
        <div class="flex align-items-center justify-content-between">
            <div>
                <p>Employee Management</p>
            </div>
            <div class="flex">
                <p-button label="Create" icon="pi pi-plus" (onClick)="createShow()"></p-button>
                <div class="p-inputgroup" style="width: 300px; margin-left: 10px;">
                    <input type="text" pInputText placeholder="Search" />
                    <button pButton type="button" icon="pi pi-search" class="p-button-secondary"></button>
                </div>
            </div>
        </div>
    </ng-template>
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="userId">ID<p-sortIcon field="userId"></p-sortIcon></th>
            <th pSortableColumn="email" [style]="{width: '30%'}">Email<p-sortIcon field="email"></p-sortIcon></th>
            <th pSortableColumn="fullName">FullName<p-sortIcon field="fullName"></p-sortIcon></th>
            <th pSortableColumn="roleName">Role<p-sortIcon field="roleName"></p-sortIcon>
            <th pSortableColumn="lastLogin">Last Login<p-sortIcon field="lastLogin"></p-sortIcon></th>
            <th pSortableColumn="createdDate">Created Date<p-sortIcon field="createdDate"></p-sortIcon></th>
            <th>#</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
        <tr>
            <td>{{user.userId}}</td>
            <td>{{user.email}}</td>
            <td>{{user.fullName}}</td>
            <td>{{user.roleName}}</td>
            <td>{{user.lastLogin}}</td>
            <td>{{user.createdDate}}</td>
            <td>
                <div class="button-action">
                    <p-button label="Edit" icon="pi pi-pencil" styleClass="p-button-warning"
                        (click)="updateShow(user)"></p-button>
                    <p-button label="Remove" icon="pi pi-trash" styleClass="p-button-danger"
                        (click)="deleteShow(user)"></p-button>
                </div>
            </td>
        </tr>
    </ng-template>
</p-table>


<p-dialog header="Product delete" [(visible)]="visibleDeleteDialog" [modal]="true" [style]="{ width: '30vw' }">
    <p>Are you sure delete <span style="color: red;">"{{selectedUser?.email}}"</span> user?</p>
    <ng-template pTemplate="footer">
        <p-button icon="pi pi-check" label="YES" (click)="deleteUser(selectedUser)"
            styleClass="p-button-text"></p-button>
        <p-button icon="pi pi-check" label="NO" (click)="visibleDeleteDialog = false; selectedUser = undefined"
            styleClass="p-button-text"></p-button>
    </ng-template>
</p-dialog>